{% comment %}
This file is licensed under the MIT License (MIT) available on
http://opensource.org/licenses/MIT.
{% endcomment %}
{% assign filename="_data/devdocs/en/guides/transactions.md" %}

## Transactions
{% include helpers/subhead-links.md %}

{% autocrossref %}

Transactions over the Skycoin network allow users to transfer SKY among each other in a fast, secure and reliable way. Each transaction is constructed out of several elements. This section will describe each element and demonstrate how to use them together to build complete transactions.

<!-- TODO: Include SKY tx image -->

The figure above shows the elements of a Skycoin transacion. Computationally speaking, a Skycoin transaction is a data structure with the following elements:

**Length**: Current transaction's length expressed in bytes <!-- sure about that? -->.
**Type**: Transaction's version. When a node tries to process a transaction, it must verify whether it supports the transaction's type. This is intended to provide a way to update skycoin clients and servers without crashing the network. <!-- Explain what happens when the transaction is not supported by the node -->
**Txid**: Transaction's identifier. It is a SHA256 hash and it is used to reference a specific transaction within the blockchain. <!-- How is the has obtained? -->
**Inner Hash**: It's a SHA256 hash of the inputs and outputs of the transaction. It is used to protect against transaction mutability. This means that the transaction cannot be altered after its creation.
**Timestamp**: Represents the time at which the transaction was created<!-- Detail the timestamp's format -->. It is used by Skycoin nodes to determine which block of Skycoin's blockchain does the transaction belong to. <!-- Improve this -->
**Sigs**: A list of digital signiatures generated by the skycoin client using the private key. It is used by Skycoin servers to verify the authenticy of the transaction. Each input requires a different signature.
**Inputs**: A list of references to unspent transaction outputs. Unlike other cryptocurrencies, such as Bitcoin, Skycoin unspent transaction outputs (UX) and Skycoin transactions (TX) are separated in the blockchain protocol, allowing for lighter transactions, thus reducing the broadcasting costs across the network. The main differences and advantages of the UTXO model (Bitcoin) over the UTXT model (Skycoin) will be further explained below.
***Outputs**: A list of outputs created by the client, that will be recorded in the blockchain if transactions are confirmed. An output consists of a data structure representing an UTXT, which includes a UTXT identifier, <!-- finish this -->.

### Transacion privacy
Bitcoin transactions are not fully anonymous, but pseudo-anonymous. Yet, several researches <!-- include references to papers --> have shown how can public addresses be associated to users' identities. Therefore, users need to implement additional techniques to enhance their transaction privacy. Nevertheless, the integration of privacy schemes in Bitcoin is not seamless, an requires a certain level of expertise and knowledge level, which makes highly unlikely their mainstream adoption.

To address this issue, Skycoin includes built-in support of Gmaxwell CoinJoin.

#### Â¿What is CoinJoin?

CoinJoin is a protocol that combines multiple transactions into a single one, named CoinJoin transaction.

<!-- TODO: Include CoinJoin pic -->

Insted of broadcasting the transaction, the client can send it to a CoinJoin server, which will recieve multiple transaction from Skycoin clients and randomly include them into CoinJoin transactions. The CoinJoin server then requests the needed signatures from each client and broadcast the signed transaction onto the Skycoin network.

To maximize privacy, Skycoin clients first split up the intended transaction among multiple addresses of the same wallet, and then send several (instead of just one) transactions to the Coinjoin server. Such addresses will likely be included in different CoinJoin transactions, greatly reducing the risk of traceability.

<!-- Include an example -->

##### CoinJoin Hardening

There are several practices CoinJoin servers can adopt to further increase transaction privacy. Here we list a few of them:

- CoinJoin servers can reject outputs held by addresses that engage in address reuse.
- CoinJoin servers can reject outputs from addresses which have received transactions from addresses engaged in reuse.
- CoinJoin servers can require that all created outputs must belong to unused addresses.
- CoinJoin servers can turn a unary CoinJoin into a binary CoinJoin, or a binary CoinJoin into a ternary<!-- Check this word --> Coinjoin (in general, an n-ary CoinJoin into an (n+1)-nary CoinJoin) by using an internal mixed wallet owned by the CoinJoin server.
- Privacy consource<!-- check this word --> users can run their own CoinJoin servers.
- CoinJoin servers can federate and and be configured to clew<!-- check this word --> mix wallet transactions through other CoinJoin servers (this is called Global Mixing).
- CoinJoin servers can fix the number of coins per output to a constant. For instance, they can determine that all outputs generated by CoinJoin transactions shall have up to 5 SKY per output, and only employ unused adresses, thus causing a transaction recipient expecting 100 SKY to receive 20 potentially unrelated on-chain transactions instead of a single on-chain transaction with 100 SKY.
- CoinJoin servers can require that each output created by a CoinJoin transaction is a power of a certain natural number. For example, powers of 2. <!-- The source I consulted only referred to powers of 2, but any natural number would do the job, and enhace generalization. Check this out -->
- CoinJoin servers are funded by collecting the coinhour balances of outputs flowing through them.

<!-- Explain why CoinJoin is supported out-of-the box as part of SKY's philosophy -->

### UTXO vs UTXT