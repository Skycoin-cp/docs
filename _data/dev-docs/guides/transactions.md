---
title: "Transactions"
isdate: false
weight: 4
filename: "/content/dev-docs/guides/transactions.md"
subhead: true
---

{{% comment %}}
This file is licensed under the MIT License (MIT) available on
http://opensource.org/licenses/MIT.
{{% /comment %}}

Transactions over the Skycoin network allow users to transfer SKY among each other in a fast, secure and reliable way. Each transaction is constructed out of several elements. This section will describe each element and demonstrate how to use them together to build complete transactions.

![skycoin-transaction-data-structure](/skycoin/img/skycoin-transaction-data-structure.png)

The figure above shows the elements of a Skycoin transacion. Computationally speaking, a Skycoin transaction is a data structure with the following elements:

**Length**: Current transaction's length expressed in bytes.

**Type**: Transaction's version. When a node tries to process a transaction, it must verify whether it supports the transaction's type. This is intended to provide a way to update skycoin clients and servers without crashing the network. If the transaction is not compatible with the node, it should not process it.

**Txid**: Transaction's identifier. It is a SHA256 of the serialization of the whole transaction, and it is used to reference a specific transaction within the blockchain.

**Inner Hash**: It's a SHA256 hash of the inputs and outputs of the transaction. It is used to protect against transaction mutability. This means that the transaction cannot be altered after its creation.

**Timestamp**: Represents the time at which the transaction was created. It is used by Skycoin nodes to determine which block of Skycoin's blockchain does the transaction belong to.

**Sigs**: A list of digital signiatures generated by the skycoin client using the private key. It is used by Skycoin servers to verify the authenticy of the transaction. Each input requires a different signature.

**Inputs**: A list of references to unspent transaction outputs. Unlike other cryptocurrencies, such as Bitcoin, Skycoin unspent transaction outputs (UX) and Skycoin transactions (TX) are separated in the blockchain protocol, allowing for lighter transactions, thus reducing the broadcasting costs across the network.

**Outputs**: A list of outputs created by the client, that will be recorded in the blockchain if transactions are confirmed. An output consists of a data structure representing an UTXT, which is composed by a Skycoin address to be sent to, the amount in Skycoin to be sent, and the amount of Coin Hours to be sent, and the SHA256 hash of the previous fields.

### Transacion privacy
Bitcoin transactions are not fully anonymous, but pseudo-anonymous. Yet, several researches <!-- include references to papers --> have shown how can public addresses be associated to users' identities. Therefore, users need to implement additional techniques to enhance their transaction privacy. Nevertheless, the integration of privacy schemes in Bitcoin is not seamless, an requires a certain level of expertise and knowledge level, which makes highly unlikely their mainstream adoption.

To address this issue, Skycoin includes built-in support of Gmaxwell CoinJoin.

#### What is CoinJoin?

CoinJoin is a protocol that combines multiple transactions into a single one, named CoinJoin transaction.

![coinjoin](/skycoin/img/coinjoin.png)

Instead of broadcasting the transaction, the client can send it to a CoinJoin server, which will recieve multiple transaction from Skycoin clients and randomly include them into CoinJoin transactions. The CoinJoin server then requests the needed signatures from each client and broadcast the signed transaction onto the Skycoin network.

To maximize privacy, Skycoin clients first split up the intended transaction among multiple addresses of the same wallet, and then send several (instead of just one) transactions to the Coinjoin server. Such addresses will likely be included in different CoinJoin transactions, greatly reducing the risk of traceability.

##### CoinJoin Hardening

There are several practices CoinJoin servers can adopt to further increase transaction privacy. Here we list a few of them:

- CoinJoin servers can reject outputs held by addresses that engage in address reuse.
- CoinJoin servers can reject outputs from addresses which have received transactions from addresses engaged in reuse.
- CoinJoin servers can require that all created outputs must belong to unused addresses.
- CoinJoin servers can turn a unary CoinJoin into a binary CoinJoin, or a binary CoinJoin into a ternary Coinjoin (in general, an n-ary CoinJoin into an (n+1)-nary CoinJoin) by using an internal mixed wallet owned by the CoinJoin server.
- Privacy concerned users can run their own CoinJoin servers.
- CoinJoin servers can federate and and be configured to clew mix wallet transactions through other CoinJoin servers (this is called Global Mixing).
- CoinJoin servers can fix the number of coins per output to a constant. For instance, they can determine that all outputs generated by CoinJoin transactions shall have up to 5 SKY per output, and only employ unused adresses, thus causing a transaction recipient expecting 100 SKY to receive 20 potentially unrelated on-chain transactions instead of a single on-chain transaction with 100 SKY.
- CoinJoin servers can require that each output created by a CoinJoin transaction is a power of a certain natural number. For example, powers of 2. <!-- The source I consulted only referred to powers of 2, but any natural number would do the job, and enhace generalization. Check this out -->

- CoinJoin servers are funded by collecting the CoinHour balances of outputs flowing through them.

The reason because CoinJoin is natively supported by the network is that Skycoin was intended to be seamlessly used by any user, regardless of his/her technological expertise. In this way, the power anonymity is given to any person who trades Skycoin.

### Coin Hours

Unlike Bitcoin, Skycoin users don't need to give away part of their balance as incentive from miners to process their transaction. Instead, they use Coin Hours as fees. CoinHours are automatically generated by holding SKY in a wallet (1 Coin Hour by every hour you hold a 1 Coin). Coin Hours are similar to “Gas” in Ethereum or coin aging in Bitcoin, but are exchange-tradeable and are a separate parallel currency in Skycoin. This way, Coin Hours work as a spam pevention mechanism, and a way to allocate scarce resources (like bandwith or storage) without the need to rely on the coin supply for this.

In future versions of the Skycoin protocol, Coin Hours will have an exchange rate against SKY, allowing for an optimal displacement of resources according to demand.

### Avoiding Key Reuse

In a regular transaction, both the sender and receiver reveal to each other all public keys or addresses used in it. This allows either person to use the public block chain to track past and future transactions involving the other person's same public keys or addresses.

If the same public key is reused often, as happens when people use Bitcoin addresses (hashed public keys) as static payment addresses, other people can easily track the receiving and spending habits of that person, including how many satoshis they control in known addresses.

It doesn't have to be that way. If each public key is used exactly twice---once to receive a payment and once to spend that payment---the user can gain a significant amount of financial privacy.

To enforce this behavior, CoinJoin server can can require that all created outputs must belong to unused addresses, as explained in [CoinJoin Hardening](#coinjoin-hardening) section.

### UXTX & Transaction malleability

Skycoin's UXTX model eliminates several defficiencies that allow Bitcoin transactions to be tampered with. Unlike Bitcoin UXTO, Skycoin transactions don't require signatures, but rather **inputs themselves**. In Bitcoin, the signature script contains the [secp256k1 signature][secp256k1 signature], which can't sign itself, allowing attackers to make non-functional modifications to a transaction without rendering it invalid. For example, an attacker can add some data to the signature script which will be dropped before the previous pubkey script is processed.

Although the modifications are non-functional---so they do not change what inputs the transaction uses nor what outputs it pays---they do change the computed hash of the transaction. Since each transaction links to previous transactions using hashes as a transaction identifier (txid), a modified transaction will not have the txid its creator expected.

This isn't a problem for most Bitcoin transactions which are designed to be added to the blockchain immediately. But it does become a problem when the output from a transaction is spent before that transaction is added to the block chain.

In Skycoin, the fact that signatures are associated to UXTX inputs renders transaction malleability attacks useless.

### Final remarks

- To the date, there is no equivalent to Bitcoin's Pay To [Public Key Hash (P2PKH)](/content/glossary/p2pkh-address.yaml) nor to [Pay To Script Hash (P2SH)](/content/glossary/p2sh-address.yaml) transaction types in Skycoin, as there is no scripting language associated to Skycoin transactions.

- Unlike Bitcoin, Skycoin doesn't implement any [standard template for transactions](/content/glossary/standard-transaction.yaml) to prevent known bugs. This occurs due to the simplicity derived from not implementing special types of transactions.

- In Skycoin transactions, a signature hash is required for every UTXT consumed as input.

- Skycoin transactions don't include the concept of [locktime](/content/glossary/locktime.yaml).
